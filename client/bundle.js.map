{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./client/js/utils/constants.js","webpack:///./client/js/helpers/elements.js","webpack:///./client/js/app.js","webpack:///./client/js/states/boot.js","webpack:///./client/js/states/preload.js","webpack:///./client/js/states/menu.js","webpack:///./client/js/states/select_map.js","webpack:///./client/js/states/pending_game.js","webpack:///./client/js/states/play.js","webpack:///./client/js/utils/utils.js","webpack:///./client/js/entities/player.js","webpack:///./client/js/entities/info.js","webpack:///./client/js/entities/enemy_player.js","webpack:///./client/js/entities/bomb.js","webpack:///./client/js/entities/spoil.js","webpack:///./client/js/entities/fire_blast.js","webpack:///./client/js/entities/bone.js","webpack:///./client/js/states/win.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","Text","_ref","_this","game","x","y","text","style","_classCallCheck","this","_possibleConstructorReturn","__proto__","getPrototypeOf","anchor","setTo","add","existing","Phaser","Button","_ref2","_this2","asset","callback","callbackContext","overFrame","outFrame","downFrame","upFrame","TextButton","_ref3","_this3","label","addChild","setFrames","inputEnabled","input","useHandCursor","GameSlots","_ref4","_this4","availableGames","yOffset","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","iterator","next","done","availableGame","gameBox","Image","button","width","game_id","id","concat","err","return","Group","callAll","PlayerSlots","_ref5","_this5","max_players","players","asset_empty","asset_player","xOffset","slotBox","slotName","_player","skin","height","SpoilNotification","_ref6","_this6","picture","tween","to","alpha","onComplete","finish","start","_boot","_interopRequireDefault","_preload","_menu","_select_map","_pending_game","_play","_win","Game","AUTO","config","state","default","_elements","State","stage","disableVisibilityChange","world","centerX","centerY","font","fill","load","image","spritesheet","tilemap","Tilemap","TILED_JSON","slotsWithGame","clientSocket","on","displayPendingGames","stroke","strokeThickness","hostGameAction","emit","destroy","forEach","keys","length","joinGameAction","_constants","slider","phaseSlider","hotMapImage","coldMapImage","createSlider","customHandlePrev","customHandleNext","objects","confirmStageSelection","map_name","AVAILABLE_MAPS","getCurrentIndex","joinToNewGame","slotsWithPlayer","displayGameInfo","launchGame","gameTitle","startGameButton","startGameAction","disable","leaveGameAction","current_game","values","console","log","enable","_utils","_enemy_player","_bomb","_spoil","_fire_blast","_bone","currentGame","createMap","createPlayers","setEventHandlers","time","events","loop","stopAnimationLoop","physics","arcade","collide","player","blockLayer","enemies","bombs","overlap","spoils","onPlayerVsSpoil","blasts","onPlayerVsBlast","map","addTilesetImage","TILESET","createLayer","LAYER","resizeWorld","setCollision","layer","properties","collisionTiles","bones","group","_arr","_i","setup","spawn","onMovePlayer","onPlayerWin","onShowBomb","onDetonateBomb","onSpoilWasPicked","onShowBones","onPlayerDisconnect","spoil","spoil_id","kill","blast","alive","col","currentCol","row","currentRow","becomesDead","player_id","enemy","findFrom","goTo","children","lastMoveAt","now","animations","stop","bomb_id","blastedCells","findAndDestroyFrom","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","cell","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","destroyed","putTile","empty","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","spoil_type","pickSpoil","winner_skin","entities","entity","_info","Player","prevPosition","delay","INITIAL_DELAY","power","INITIAL_POWER","speed","INITIAL_SPEED","_lastBombTime","body","setSize","PING","positionUpdaterLoop","info","defineKeyboard","defineSelf","Sprite","handleMoves","handleBombs","upKey","keyboard","addKey","Keyboard","UP","downKey","DOWN","leftKey","LEFT","rightKey","RIGHT","spaceKey","SPACEBAR","velocity","set","animationsArray","isDown","push","currentAnimation","play","Math","floor","position","TILE_SIZE","newPosition","showDeadInfo","increaseSpeed","increasePower","increaseDelay","MAX_SPEED","STEP_SPEED","refreshStatistic","MIN_DELAY","STEP_DELAY","STEP_POWER","playerText","Info","align","redStyle","bootsIcon","speedText","speedLabel","powerIcon","powerText","powerLabel","delayIcon","delayText","delayLabel","deadText","visible","EnemyPlayer","currentPosition","immovable","animateFace","Easing","Linear","None","face","diffX","diffY","Bomb","centerCol","centerRow","scale","EXPLOSION_TIME","Spoil","DELAY","POWER","SPEED","FireBlast","type","Bone","winnerText","ENTER","returnToMenu"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n","export const AVAILABLE_MAPS = ['hot_map', 'cold_map']\r\nexport const TILESET = 'tiles';\r\nexport const LAYER   = 'Blocks';\r\n\r\nexport const TILE_SIZE = 35;\r\nexport const EXPLOSION_TIME = 2000;\r\nexport const PING = 100;\r\n\r\nexport const SPEED = 0\r\nexport const POWER = 1\r\nexport const DELAY = 2\r\n\r\nexport const INITIAL_SPEED = 150\r\nexport const STEP_SPEED = 50\r\nexport const MAX_SPEED = 350\r\nexport const INITIAL_DELAY = 2000\r\nexport const STEP_DELAY = 500\r\nexport const MIN_DELAY = 500\r\nexport const INITIAL_POWER = 1\r\nexport const STEP_POWER = 1\r\n","export class Text extends Phaser.Text {\r\n\r\n  constructor({ game, x, y, text, style }) {\r\n    super(game, x, y, text, style);\r\n    this.anchor.setTo(0.5);\r\n\r\n    this.game.add.existing(this);\r\n  }\r\n\r\n}\r\n\r\nexport class Button extends Phaser.Button {\r\n\r\n  constructor({ game, x, y, asset, callback, callbackContext, overFrame, outFrame, downFrame, upFrame }) {\r\n    super(game, x, y, asset, callback, callbackContext, overFrame, outFrame, downFrame, upFrame);\r\n    this.anchor.setTo(0.5);\r\n\r\n    this.game.add.existing(this);\r\n  }\r\n\r\n}\r\n\r\nexport class TextButton extends Phaser.Button {\r\n\r\n  constructor({ game, x, y, asset, callback, callbackContext, overFrame, outFrame, downFrame, upFrame, label, style }) {\r\n    super(game, x, y, asset, callback, callbackContext, overFrame, outFrame, downFrame, upFrame);\r\n    this.anchor.setTo(0.5);\r\n\r\n    this.text = new Phaser.Text(this.game, 0, 0, label, style);\r\n    this.text.anchor.setTo(0.5);\r\n\r\n    this.addChild(this.text);\r\n\r\n    this.game.add.existing(this);\r\n  }\r\n\r\n  disable() {\r\n    this.setFrames(3, 3);\r\n    this.inputEnabled = false;\r\n    this.input.useHandCursor = false;\r\n  }\r\n\r\n  enable() {\r\n    this.setFrames(1, 0, 2);\r\n    this.inputEnabled = true;\r\n    this.input.useHandCursor = true;\r\n  }\r\n\r\n}\r\n\r\nexport class GameSlots extends Phaser.Group {\r\n\r\n  constructor({ game, availableGames, callback, callbackContext, x, y, style }) {\r\n    super(game);\r\n\r\n    let game_slot_asset = 'slot_backdrop'\r\n    let game_enter_asset = 'list_icon'\r\n\r\n    let yOffset = y;\r\n\r\n    for (let availableGame of availableGames) {\r\n      let gameBox = new Phaser.Image(this.game, x, yOffset, game_slot_asset)\r\n      let button = new Phaser.Button(this.game, gameBox.width - 100, 12, game_enter_asset, callback.bind(callbackContext, { game_id: availableGame.id }), null, 1, 0, 2, 1);\r\n      let text = new Phaser.Text(this.game, 30, 25, `Join Game: ${availableGame.name}`, style);\r\n\r\n      gameBox.addChild(button);\r\n      gameBox.addChild(text);\r\n\r\n      this.add(gameBox);\r\n\r\n      yOffset += 105;\r\n    }\r\n  }\r\n\r\n  destroy() {\r\n    this.callAll('kill') // destroy\r\n  }\r\n}\r\n\r\nexport class PlayerSlots extends Phaser.Group {\r\n\r\n  constructor({ game, max_players, players, x, y, asset_empty, asset_player, style }) {\r\n    super(game);\r\n\r\n    let xOffset = x;\r\n\r\n    for (let i = 0; i < max_players; i++) {\r\n      let slotBox\r\n      let slotName\r\n      let _player = players[i]\r\n\r\n      if (_player) {\r\n        slotBox = new Phaser.Image(this.game, xOffset, y, asset_player+_player.skin)\r\n        slotName = new Phaser.Text(this.game, slotBox.width/2, slotBox.height + 15, _player.skin, style);\r\n        slotName.anchor.setTo(0.5);\r\n        slotBox.addChild(slotName);\r\n      } else {\r\n        slotBox = new Phaser.Image(this.game, xOffset, y, asset_empty)\r\n      }\r\n\r\n      this.add(slotBox);\r\n      xOffset += 170;\r\n    }\r\n  }\r\n\r\n  destroy() {\r\n    this.callAll('kill')\r\n  }\r\n}\r\n\r\nexport class SpoilNotification extends Phaser.Group {\r\n\r\n  constructor({ game, asset, x, y }) {\r\n    super(game)\r\n\r\n    this.picture = new Phaser.Image(this.game, x, y - 20, asset);\r\n    this.picture.anchor.setTo(0.5);\r\n\r\n    this.add(this.picture);\r\n\r\n    this.tween = this.game.add.tween(this.picture);\r\n    this.tween.to({ y: this.picture.y - 25, alpha: 0 }, 600);\r\n\r\n    this.tween.onComplete.add(this.finish, this);\r\n\r\n    this.tween.start()\r\n  }\r\n\r\n  finish() {\r\n    this.callAll('kill')\r\n  }\r\n}\r\n","import Boot from './states/boot';\r\nimport Preload from './states/preload';\r\nimport Menu from './states/menu';\r\nimport SelectMap from './states/select_map';\r\nimport PendingGame from './states/pending_game';\r\nimport Play from './states/play';\r\nimport Win from './states/win';\r\n\r\nclass Game extends Phaser.Game {\r\n  constructor() {\r\n    super(980, 630, Phaser.AUTO, 'game-container');\r\n\r\n    // Tell Phaser to use setTimeOut even if RAF(request animation frame) is available.\r\n    this.config['forceSetTimeOut'] = true\r\n\r\n    this.state.add('Boot',         Boot);\r\n    this.state.add('Preload',      Preload);\r\n    this.state.add('Menu',         Menu);\r\n    this.state.add('SelectMap',    SelectMap);\r\n    this.state.add('PendingGame',  PendingGame);\r\n    this.state.add('Play',         Play);\r\n    this.state.add('Win',          Win);\r\n\r\n    this.state.start('Boot');\r\n  }\r\n}\r\n\r\nnew Game();\r\n","import { Text } from '../helpers/elements';\r\n\r\nclass Boot extends Phaser.State {\r\n\r\n  create() {\r\n    // Make the game keep reacting to messages from the server even when the game window doesn’t have focus.\r\n    // The game pauses when I open a new tab in the same window, but does not pause when I focus on another application\r\n    this.game.stage.disableVisibilityChange = true;\r\n\r\n    new Text({\r\n      game: this.game,\r\n      x: this.game.world.centerX,\r\n      y: this.game.world.centerY,\r\n      text: 'Loading...',\r\n      style: {\r\n        font: '30px Areal',\r\n        fill: '#FFFFFF'\r\n      }\r\n    })\r\n\r\n    this.state.start('Preload');\r\n  }\r\n\r\n}\r\n\r\nexport default Boot;\r\n","class Preload extends Phaser.State {\r\n\r\n  preload() {\r\n    // Menu:\r\n    this.load.image('main_menu',     'images/menu/main_menu.png');\r\n    this.load.image('slot_backdrop', 'images/menu/slot_backdrop.png');\r\n\r\n    this.load.spritesheet('buttons',    'images/menu/buttons.png', 200, 75);\r\n    this.load.spritesheet('check_icon', 'images/menu/accepts.png', 75, 75);\r\n    this.load.spritesheet('list_icon',  'images/menu/game_enter.png', 75, 75);\r\n\r\n    this.load.image('hot_map_preview',  'images/menu/hot_map_preview.png');\r\n    this.load.image('cold_map_preview', 'images/menu/cold_map_preview.png');\r\n    this.load.image('prev',             'images/menu/left_arrow.png');\r\n    this.load.image('next',             'images/menu/right_arrow.png');\r\n\r\n    // Map:\r\n    this.load.image('tiles',      'maps/tileset.png');\r\n    this.load.tilemap('hot_map',  'maps/hot_map.json', null, Phaser.Tilemap.TILED_JSON);\r\n    this.load.tilemap('cold_map', 'maps/cold_map.json', null, Phaser.Tilemap.TILED_JSON);\r\n\r\n\r\n    // Game:\r\n    this.load.spritesheet('explosion_center',     'images/game/explosion_center.png',     35, 35);\r\n    this.load.spritesheet('explosion_horizontal', 'images/game/explosion_horizontal.png', 35, 35);\r\n    this.load.spritesheet('explosion_vertical',   'images/game/explosion_vertical.png',   35, 35);\r\n    this.load.spritesheet('explosion_up',         'images/game/explosion_up.png',         35, 35);\r\n    this.load.spritesheet('explosion_right',      'images/game/explosion_right.png',      35, 35);\r\n    this.load.spritesheet('explosion_down',       'images/game/explosion_down.png',       35, 35);\r\n    this.load.spritesheet('explosion_left',       'images/game/explosion_left.png',       35, 35);\r\n\r\n    this.load.spritesheet('spoil_tileset', 'images/game/spoil_tileset.png', 35, 35);\r\n    this.load.spritesheet('bone_tileset',  'images/game/bone_tileset.png', 35, 35);\r\n    this.load.spritesheet('bomb_tileset',  'images/game/bombs.png', 35, 35);\r\n\r\n    this.load.image('speed_up_bonus',    'images/game/speed_up_bonus.png');\r\n    this.load.image('speed_up_no_bonus', 'images/game/speed_up_no_bonus.png');\r\n    this.load.image('delay_up_bonus',    'images/game/delay_up_bonus.png');\r\n    this.load.image('delay_up_no_bonus', 'images/game/delay_up_no_bonus.png');\r\n    this.load.image('power_up_bonus',    'images/game/power_up_bonus.png');\r\n\r\n    this.load.image('placeholder_power', 'images/game/placeholder_power.png');\r\n    this.load.image('placeholder_speed', 'images/game/placeholder_speed.png');\r\n    this.load.image('placeholder_time',  'images/game/placeholder_time.png');\r\n\r\n    // Skins:\r\n    this.load.image('bomberman_head_blank',     'images/game/chars/0-face.png');\r\n\r\n    this.load.image('bomberman_head_Theodora',  'images/game/chars/1-face.png');\r\n    this.load.image('bomberman_head_Ringo',     'images/game/chars/2-face.png');\r\n    this.load.image('bomberman_head_Jeniffer',  'images/game/chars/3-face.png');\r\n    this.load.image('bomberman_head_Godard',    'images/game/chars/4-face.png');\r\n    this.load.image('bomberman_head_Biarid',    'images/game/chars/5-face.png');\r\n    this.load.image('bomberman_head_Solia',     'images/game/chars/6-face.png');\r\n    this.load.image('bomberman_head_Kedan',     'images/game/chars/7-face.png');\r\n    this.load.image('bomberman_head_Nigob',     'images/game/chars/8-face.png');\r\n    this.load.image('bomberman_head_Baradir',   'images/game/chars/9-face.png');\r\n    this.load.image('bomberman_head_Raviel',    'images/game/chars/10-face.png');\r\n    this.load.image('bomberman_head_Valpo',     'images/game/chars/11-face.png');\r\n\r\n    this.load.spritesheet('bomberman_Theodora',  'images/game/chars/1-preview.png', 32, 32);\r\n    this.load.spritesheet('bomberman_Ringo',     'images/game/chars/2-preview.png', 32, 32);\r\n    this.load.spritesheet('bomberman_Jeniffer',  'images/game/chars/3-preview.png', 32, 32);\r\n    this.load.spritesheet('bomberman_Godard',    'images/game/chars/4-preview.png', 32, 32);\r\n    this.load.spritesheet('bomberman_Biarid',    'images/game/chars/5-preview.png', 32, 32);\r\n    this.load.spritesheet('bomberman_Solia',     'images/game/chars/6-preview.png', 32, 32);\r\n    this.load.spritesheet('bomberman_Kedan',     'images/game/chars/7-preview.png', 32, 32);\r\n    this.load.spritesheet('bomberman_Nigob',     'images/game/chars/8-preview.png', 32, 32);\r\n    this.load.spritesheet('bomberman_Baradir',   'images/game/chars/9-preview.png', 32, 32);\r\n    this.load.spritesheet('bomberman_Raviel',    'images/game/chars/10-preview.png', 32, 32);\r\n    this.load.spritesheet('bomberman_Valpo',     'images/game/chars/11-preview.png', 32, 32);\r\n  }\r\n\r\n  create() {\r\n    this.state.start('Menu');\r\n  }\r\n}\r\n\r\nexport default Preload;\r\n","import { Text, TextButton, GameSlots } from '../helpers/elements';\r\n\r\nclass Menu extends Phaser.State {\r\n\r\n  init() {\r\n    this.slotsWithGame = null;\r\n\r\n    clientSocket.on('display pending games', this.displayPendingGames.bind(this));\r\n  }\r\n\r\n  create() {\r\n    let background = this.add.image(this.game.world.centerX, this.game.world.centerY, 'main_menu');\r\n    background.anchor.setTo(0.5);\r\n\r\n\r\n    new Text({\r\n      game: this.game,\r\n      x: this.game.world.centerX,\r\n      y: this.game.world.centerY - 215,\r\n      text: 'Main Menu',\r\n      style: {\r\n        font: '35px Areal',\r\n        fill: '#9ec0ba',\r\n        stroke: '#7f9995',\r\n        strokeThickness: 3\r\n      }\r\n    })\r\n\r\n    new TextButton({\r\n      game: this.game,\r\n      x: this.game.world.centerX,\r\n      y: this.game.world.centerY + 195,\r\n      asset: 'buttons',\r\n      callback: this.hostGameAction,\r\n      callbackContext: this,\r\n      overFrame: 1,\r\n      outFrame: 0,\r\n      downFrame: 2,\r\n      upFrame: 0,\r\n      label: 'New Game',\r\n      style: {\r\n        font: '20px Areal',\r\n        fill: '#000000'\r\n      }\r\n    });\r\n\r\n    clientSocket.emit('enter lobby', this.displayPendingGames.bind(this));\r\n  }\r\n\r\n  update() {\r\n  }\r\n\r\n  hostGameAction() {\r\n    clientSocket.emit('leave lobby');\r\n    this.state.start('SelectMap');\r\n  }\r\n\r\n  displayPendingGames(availableGames) {\r\n    // NOTE: That is not optimal way to preview slots,\r\n    //       we should implement AddSlotToGroup, RemoveSlotFromGroup\r\n\r\n    // I triying to care about readability, not about performance.\r\n    if (this.slotsWithGame) {\r\n      this.slotsWithGame.destroy()\r\n    }\r\n\r\n    availableGames.forEach(game => {\r\n      game.name = ` [${Object.keys(availableGames[0].players).length}] ${game.name}`;\r\n    })\r\n\r\n    this.slotsWithGame = new GameSlots({\r\n      game: this.game,\r\n      availableGames: availableGames,\r\n      callback: this.joinGameAction,\r\n      callbackContext: this,\r\n      x: this.game.world.centerX - 220,\r\n      y: 160,\r\n      style: {\r\n        font: '35px Areal',\r\n        fill: '#efefef',\r\n        stroke: '#ae743a',\r\n        strokeThickness: 3\r\n      }\r\n    })\r\n  }\r\n\r\n  joinGameAction(game_id) {\r\n    clientSocket.emit('leave lobby');\r\n    // https://phaser.io/docs/2.6.2/Phaser.StateManager.html#start\r\n    this.state.start('PendingGame', true, false, game_id);\r\n  }\r\n}\r\n\r\nexport default Menu;\r\n","import { AVAILABLE_MAPS } from '../utils/constants';\r\nimport { Text, Button } from '../helpers/elements';\r\n\r\nclass SelectMap extends Phaser.State {\r\n\r\n  init() {\r\n    this.slider = new phaseSlider(this);\r\n  }\r\n\r\n  create() {\r\n    let background = this.add.image(this.game.world.centerX, this.game.world.centerY, 'main_menu');\r\n    background.anchor.setTo(0.5);\r\n\r\n    new Text({\r\n      game: this.game,\r\n      x: this.game.world.centerX,\r\n      y: this.game.world.centerY - 215,\r\n      text: 'Select Map',\r\n      style: {\r\n        font: '35px Areal',\r\n        fill: '#9ec0ba',\r\n        stroke: '#6f7975',\r\n        strokeThickness: 3\r\n      }\r\n    });\r\n\r\n\r\n    // WARN: https://github.com/netgfx/PhaseSlider/issues/1\r\n    let hotMapImage = new Phaser.Image(this.game, 0, 0, 'hot_map_preview');\r\n    let coldMapImage = new Phaser.Image(this.game, 0, 0, 'cold_map_preview');\r\n\r\n    this.slider.createSlider({\r\n      x: this.game.world.centerX - hotMapImage.width / 2,\r\n      y: this.game.world.centerY - coldMapImage.height / 2,\r\n      width: hotMapImage.width,\r\n      height: hotMapImage.height,\r\n      customHandlePrev: 'prev',\r\n      customHandleNext: 'next',\r\n      objects: [hotMapImage, coldMapImage]\r\n    });\r\n\r\n    new Button({\r\n      game: this.game,\r\n      x: this.game.world.centerX,\r\n      y: this.game.world.centerY + 195,\r\n      asset: 'check_icon',\r\n      callback: this.confirmStageSelection,\r\n      callbackContext: this,\r\n      overFrame: 1,\r\n      outFrame: 0,\r\n      downFrame: 2,\r\n      upFrame: 0,\r\n    })\r\n  }\r\n\r\n  confirmStageSelection() {\r\n    let map_name = AVAILABLE_MAPS[this.slider.getCurrentIndex()]\r\n\r\n    clientSocket.emit('create game', map_name, this.joinToNewGame.bind(this));\r\n  }\r\n\r\n  joinToNewGame(game_id) {\r\n    this.state.start('PendingGame', true, false, game_id);\r\n  }\r\n}\r\n\r\nexport default SelectMap;\r\n","import { Text, Button, TextButton, PlayerSlots } from '../helpers/elements';\r\n\r\nclass PendingGame extends Phaser.State {\r\n\r\n  init({ game_id }) {\r\n    this.slotsWithPlayer = null;\r\n\r\n    this.game_id = game_id;\r\n\r\n    clientSocket.on('update game', this.displayGameInfo.bind(this));\r\n    clientSocket.on('launch game', this.launchGame.bind(this));\r\n\r\n    clientSocket.emit('enter pending game', { game_id: this.game_id });\r\n  }\r\n\r\n  create() {\r\n    let background = this.add.image(this.game.world.centerX, this.game.world.centerY, 'main_menu');\r\n    background.anchor.setTo(0.5);\r\n\r\n    this.gameTitle = new Text({\r\n      game: this.game,\r\n      x: this.game.world.centerX,\r\n      y: this.game.world.centerY - 215,\r\n      text: '',\r\n      style: {\r\n        font: '35px Areal',\r\n        fill: '#9ec0ba',\r\n        stroke: '#6f7975',\r\n        strokeThickness: 3\r\n      }\r\n    })\r\n\r\n    this.startGameButton = new TextButton({\r\n      game: this.game,\r\n      x: this.game.world.centerX + 105,\r\n      y: this.game.world.centerY + 195,\r\n      asset: 'buttons',\r\n      callback: this.startGameAction,\r\n      callbackContext: this,\r\n      overFrame: 1,\r\n      outFrame: 0,\r\n      downFrame: 2,\r\n      upFrame: 0,\r\n      label: 'Start Game',\r\n      style: {\r\n        font: '20px Areal',\r\n        fill: '#000000'\r\n      }\r\n    });\r\n\r\n    this.startGameButton.disable()\r\n\r\n    new TextButton({\r\n      game: this.game,\r\n      x: this.game.world.centerX - 105,\r\n      y: this.game.world.centerY + 195,\r\n      asset: 'buttons',\r\n      callback: this.leaveGameAction,\r\n      callbackContext: this,\r\n      overFrame: 1,\r\n      outFrame: 0,\r\n      downFrame: 2,\r\n      upFrame: 0,\r\n      label: 'Leave Game',\r\n      style: {\r\n        font: '20px Areal',\r\n        fill: '#000000'\r\n      }\r\n    });\r\n\r\n  }\r\n\r\n  displayGameInfo({ current_game }) {\r\n    let players = Object.values(current_game.players);\r\n\r\n    this.gameTitle.text = `${current_game.name} [${players.length}]`\r\n\r\n    console.log(players);\r\n    if (this.slotsWithPlayer) {\r\n      this.slotsWithPlayer.destroy()\r\n    }\r\n\r\n    this.slotsWithPlayer = new PlayerSlots({\r\n      game: this.game,\r\n      max_players: current_game.max_players,\r\n      players: players,\r\n      x: this.game.world.centerX - 245,\r\n      y: this.game.world.centerY - 80,\r\n      asset_empty: 'bomberman_head_blank',\r\n      asset_player: 'bomberman_head_',\r\n      style: {\r\n        font: '20px Areal',\r\n        fill: '#48291c'\r\n      }\r\n    })\r\n\r\n    if(players.length > 1) {\r\n      this.startGameButton.enable();\r\n    } else {\r\n      this.startGameButton.disable();\r\n    }\r\n  }\r\n\r\n  leaveGameAction() {\r\n    clientSocket.emit('leave pending game');\r\n\r\n    this.state.start('Menu');\r\n  }\r\n\r\n  startGameAction() {\r\n    clientSocket.emit('start game');\r\n  }\r\n\r\n  launchGame(game) {\r\n    this.state.start('Play', true, false, game);\r\n  }\r\n}\r\n\r\nexport default PendingGame;\r\n","import { findFrom, findAndDestroyFrom } from '../utils/utils';\r\nimport { TILESET, LAYER } from '../utils/constants';\r\n\r\nimport Player from '../entities/player';\r\nimport EnemyPlayer from '../entities/enemy_player';\r\nimport Bomb from '../entities/bomb';\r\nimport Spoil from '../entities/spoil';\r\nimport FireBlast from '../entities/fire_blast';\r\nimport Bone from '../entities/bone';\r\n\r\nclass Play extends Phaser.State {\r\n  init(game) {\r\n    this.currentGame = game\r\n  }\r\n\r\n  create() {\r\n    this.createMap();\r\n    this.createPlayers();\r\n    this.setEventHandlers();\r\n\r\n    this.game.time.events.loop(400 , this.stopAnimationLoop.bind(this));\r\n  }\r\n\r\n  update() {\r\n    this.game.physics.arcade.collide(this.player, this.blockLayer);\r\n    this.game.physics.arcade.collide(this.player, this.enemies);\r\n    this.game.physics.arcade.collide(this.player, this.bombs);\r\n\r\n    this.game.physics.arcade.overlap(this.player, this.spoils, this.onPlayerVsSpoil, null, this);\r\n    this.game.physics.arcade.overlap(this.player, this.blasts, this.onPlayerVsBlast, null, this);\r\n  }\r\n\r\n  createMap() {\r\n    this.map = this.add.tilemap(this.currentGame.map_name);\r\n\r\n    this.map.addTilesetImage(TILESET);\r\n\r\n    this.blockLayer = this.map.createLayer(LAYER);\r\n    this.blockLayer.resizeWorld();\r\n\r\n    this.map.setCollision(this.blockLayer.layer.properties.collisionTiles)\r\n\r\n    this.player  = null;\r\n    this.bones   = this.game.add.group();\r\n    this.bombs   = this.game.add.group();\r\n    this.spoils  = this.game.add.group();\r\n    this.blasts  = this.game.add.group();\r\n    this.enemies = this.game.add.group();\r\n\r\n    this.game.physics.arcade.enable(this.blockLayer);\r\n  }\r\n\r\n  createPlayers() {\r\n    for (let player of Object.values(this.currentGame.players)) {\r\n      let setup = {\r\n        game:   this.game,\r\n        id:     player.id,\r\n        spawn:  player.spawn,\r\n        skin:   player.skin\r\n      }\r\n\r\n      if (player.id === clientSocket.id) {\r\n        this.player = new Player(setup);\r\n      } else {\r\n        this.enemies.add(new EnemyPlayer(setup))\r\n      }\r\n    }\r\n  }\r\n\r\n  setEventHandlers() {\r\n    clientSocket.on('move player', this.onMovePlayer.bind(this));\r\n    clientSocket.on('player win', this.onPlayerWin.bind(this));\r\n    clientSocket.on('show bomb', this.onShowBomb.bind(this));\r\n    clientSocket.on('detonate bomb', this.onDetonateBomb.bind(this));\r\n    clientSocket.on('spoil was picked', this.onSpoilWasPicked.bind(this));\r\n    clientSocket.on('show bones', this.onShowBones.bind(this));\r\n    clientSocket.on('player disconnect', this.onPlayerDisconnect.bind(this));\r\n  }\r\n\r\n  onPlayerVsSpoil(player, spoil) {\r\n    clientSocket.emit('pick up spoil', { spoil_id: spoil.id });\r\n    spoil.kill();\r\n  }\r\n\r\n  onPlayerVsBlast(player, blast) {\r\n    if (player.alive) {\r\n      clientSocket.emit('player died', { col: player.currentCol(), row: player.currentRow() });\r\n      player.becomesDead()\r\n    }\r\n  }\r\n\r\n  onMovePlayer({ player_id, x, y }) {\r\n    let enemy = findFrom(player_id, this.enemies);\r\n    if (!enemy) { return }\r\n\r\n    enemy.goTo({ x: x, y: y })\r\n  }\r\n\r\n  stopAnimationLoop() {\r\n    for (let enemy of this.enemies.children) {\r\n      if (enemy.lastMoveAt < this.game.time.now - 200) {\r\n        enemy.animations.stop();\r\n      }\r\n    }\r\n  }\r\n\r\n  onShowBomb({ bomb_id, col, row }) {\r\n    this.bombs.add(new Bomb(this.game, bomb_id, col, row));\r\n  }\r\n\r\n  onDetonateBomb({ bomb_id, blastedCells }) {\r\n    // Remove Bomb:\r\n    findAndDestroyFrom(bomb_id, this.bombs)\r\n\r\n    // Render Blast:\r\n    for (let cell of blastedCells) {\r\n      this.blasts.add(new FireBlast(this.game, cell));\r\n    };\r\n\r\n    // Destroy Tiles:\r\n    for (let cell of blastedCells) {\r\n      if (!cell.destroyed) { continue }\r\n\r\n      this.map.putTile(this.blockLayer.layer.properties.empty, cell.col, cell.row, this.blockLayer);\r\n    };\r\n\r\n    // Add Spoils:\r\n    for (let cell of blastedCells) {\r\n      if (!cell.destroyed) { continue }\r\n      if (!cell.spoil) { continue }\r\n\r\n      this.spoils.add(new Spoil(this.game, cell.spoil));\r\n    };\r\n  }\r\n\r\n  onSpoilWasPicked({ player_id, spoil_id, spoil_type }){\r\n    if (player_id === this.player.id){\r\n      this.player.pickSpoil(spoil_type)\r\n    }\r\n\r\n    findAndDestroyFrom(spoil_id, this.spoils)\r\n  }\r\n\r\n  onShowBones({ player_id, col, row }) {\r\n    this.bones.add(new Bone(this.game, col, row));\r\n\r\n    findAndDestroyFrom(player_id, this.enemies)\r\n  }\r\n\r\n  onPlayerWin(winner_skin) {\r\n    clientSocket.emit('leave game');\r\n\r\n    this.state.start('Win', true, false, winner_skin);\r\n  }\r\n\r\n  onPlayerDisconnect({ player_id }) {\r\n    findAndDestroyFrom(player_id, this.enemies);\r\n\r\n    if (this.enemies.children.length >= 1) { return }\r\n\r\n    this.onPlayerWin()\r\n  }\r\n}\r\n\r\nexport default Play;\r\n","export const findFrom = function(id, entities) {\r\n  for (let entity of entities.children) {\r\n    if (entity.id !== id) { continue }\r\n\r\n    return entity\r\n  }\r\n  return null;\r\n}\r\n\r\nexport const findAndDestroyFrom = function(id, entities) {\r\n  let entity = findFrom(id, entities);\r\n  if (!entity) { return }\r\n\r\n  entity.destroy()\r\n}\r\n","import {\r\n  PING, TILE_SIZE, MAX_SPEED, STEP_SPEED, INITIAL_SPEED, SPEED, POWER, DELAY,\r\n  MIN_DELAY, STEP_DELAY, INITIAL_DELAY, INITIAL_POWER, STEP_POWER\r\n} from '../utils/constants';\r\n\r\nimport Info from './info';\r\nimport { SpoilNotification, Text } from '../helpers/elements';\r\n\r\nexport default class Player extends Phaser.Sprite {\r\n\r\n  constructor({ game, id, spawn, skin }) {\r\n    super(game, spawn.x, spawn.y, 'bomberman_' + skin);\r\n\r\n    this.game = game;\r\n    this.id = id;\r\n\r\n    this.prevPosition = { x: spawn.x, y: spawn.y };\r\n\r\n    this.delay = INITIAL_DELAY;\r\n    this.power = INITIAL_POWER;\r\n    this.speed = INITIAL_SPEED;\r\n    this._lastBombTime = 0;\r\n\r\n    this.game.add.existing(this);\r\n    this.game.physics.arcade.enable(this);\r\n    this.body.setSize(20, 20, 6, 6);\r\n\r\n    game.time.events.loop(PING , this.positionUpdaterLoop.bind(this));\r\n\r\n    this.animations.add('up', [9, 10, 11], 15, true);\r\n    this.animations.add('down', [0, 1, 2], 15, true);\r\n    this.animations.add('right', [6, 7, 8], 15, true);\r\n    this.animations.add('left', [3, 4, 5], 15, true);\r\n\r\n    this.info = new Info({ game: this.game, player: this });\r\n\r\n    this.defineKeyboard()\r\n    this.defineSelf(skin)\r\n  }\r\n\r\n  update() {\r\n    if (this.alive) {\r\n      this.handleMoves()\r\n      this.handleBombs()\r\n    }\r\n\r\n    // this.game.debug.body(this);\r\n    // this.game.debug.spriteInfo(this, 32, 32);\r\n  }\r\n\r\n  defineKeyboard() {\r\n    this.upKey    = this.game.input.keyboard.addKey(Phaser.Keyboard.UP)\r\n    this.downKey  = this.game.input.keyboard.addKey(Phaser.Keyboard.DOWN)\r\n    this.leftKey  = this.game.input.keyboard.addKey(Phaser.Keyboard.LEFT)\r\n    this.rightKey = this.game.input.keyboard.addKey(Phaser.Keyboard.RIGHT)\r\n    this.spaceKey = this.game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR)\r\n  }\r\n\r\n  handleMoves() {\r\n    this.body.velocity.set(0);\r\n    let animationsArray = []\r\n\r\n    if (this.leftKey.isDown){\r\n      this.body.velocity.x = -this.speed;\r\n      animationsArray.push('left')\r\n    } else if (this.rightKey.isDown) {\r\n      this.body.velocity.x = this.speed;\r\n      animationsArray.push('right')\r\n    }\r\n\r\n    if (this.upKey.isDown) {\r\n      this.body.velocity.y = -this.speed;\r\n      animationsArray.push('up')\r\n    } else if (this.downKey.isDown) {\r\n      this.body.velocity.y = this.speed;\r\n      animationsArray.push('down')\r\n    }\r\n\r\n    let currentAnimation = animationsArray[0]\r\n    if (currentAnimation){\r\n      this.animations.play(currentAnimation)\r\n      return\r\n    }\r\n\r\n    this.animations.stop();\r\n  }\r\n\r\n  handleBombs() {\r\n    if (this.game.input.keyboard.isDown(Phaser.Keyboard.SPACEBAR)) {\r\n      let now = this.game.time.now;\r\n\r\n      if (now > this._lastBombTime) {\r\n        this._lastBombTime = now + this.delay;\r\n\r\n        clientSocket.emit('create bomb', { col: this.currentCol(), row: this.currentRow() });\r\n      }\r\n    }\r\n  }\r\n\r\n  currentCol() {\r\n    return Math.floor(this.body.position.x / TILE_SIZE)\r\n  }\r\n\r\n  currentRow() {\r\n    return Math.floor(this.body.position.y / TILE_SIZE)\r\n  }\r\n\r\n  positionUpdaterLoop() {\r\n    let newPosition = { x: this.position.x, y: this.position.y }\r\n\r\n    if (this.prevPosition.x !== newPosition.x || this.prevPosition.y !== newPosition.y) {\r\n      clientSocket.emit('update player position', newPosition);\r\n      this.prevPosition = newPosition;\r\n    }\r\n  }\r\n\r\n  becomesDead() {\r\n    this.info.showDeadInfo()\r\n    this.kill();\r\n  }\r\n\r\n  pickSpoil( spoil_type ){\r\n    if ( spoil_type === SPEED ){ this.increaseSpeed() }\r\n    if ( spoil_type === POWER ){ this.increasePower() }\r\n    if ( spoil_type === DELAY ){ this.increaseDelay() }\r\n  }\r\n\r\n  increaseSpeed(){\r\n    let asset = 'speed_up_no_bonus'\r\n\r\n    if (this.speed < MAX_SPEED) {\r\n      this.speed = this.speed + STEP_SPEED;\r\n      this.info.refreshStatistic();\r\n      asset = 'speed_up_bonus'\r\n    }\r\n\r\n    new SpoilNotification({ game: this.game, asset: asset, x: this.position.x, y: this.position.y })\r\n  }\r\n\r\n  increaseDelay(){\r\n    let asset = 'delay_up_no_bonus'\r\n\r\n    if (this.delay > MIN_DELAY){\r\n      this.delay -= STEP_DELAY;\r\n      this.info.refreshStatistic();\r\n      asset = 'delay_up_bonus'\r\n    }\r\n\r\n    new SpoilNotification({ game: this.game, asset: asset, x: this.position.x, y: this.position.y })\r\n  }\r\n\r\n  increasePower(){\r\n    let asset = 'power_up_bonus'\r\n\r\n    this.power += STEP_POWER;\r\n    this.info.refreshStatistic();\r\n\r\n    new SpoilNotification({ game: this.game, asset: asset, x: this.position.x, y: this.position.y })\r\n  }\r\n\r\n  defineSelf(name) {\r\n    let playerText = new Text({\r\n      game: this.game,\r\n      x: TILE_SIZE / 2,\r\n      y: -10,\r\n      text: `\\u272E ${name} \\u272E`,\r\n      style: {\r\n        font: '15px Areal',\r\n        fill: '#FFFFFF',\r\n          stroke: '#000000',\r\n          strokeThickness: 3\r\n      }\r\n    })\r\n\r\n    this.addChild(playerText);\r\n  }\r\n}\r\n","export default class Info {\r\n\r\n  constructor({ game, player }) {\r\n    this.game = game;\r\n    this.player = player;\r\n\r\n    this.style    = { font: '14px Arial', fill: '#ffffff', align: 'left' }\r\n    this.redStyle = { font: '30px Arial', fill: '#ff0044', align: 'center' };\r\n\r\n    let bootsIcon  = new Phaser.Image(this.game, 5, 2, 'placeholder_speed');\r\n    this.speedText = new Phaser.Text(this.game, 35, 7, this.speedLabel(), this.style);\r\n    bootsIcon.addChild(this.speedText)\r\n    this.game.add.existing(bootsIcon);\r\n\r\n    let powerIcon  = new Phaser.Image(this.game, 110, 2, 'placeholder_power');\r\n    this.powerText = new Phaser.Text(this.game, 35, 7, this.powerLabel(), this.style);\r\n    powerIcon.addChild(this.powerText)\r\n    this.game.add.existing(powerIcon);\r\n\r\n    let delayIcon  = new Phaser.Image(this.game, 215, 2, 'placeholder_time');\r\n    this.delayText = new Phaser.Text(this.game, 35, 7, this.delayLabel(), this.style);\r\n    delayIcon.addChild(this.delayText)\r\n    this.game.add.existing(delayIcon);\r\n\r\n    this.deadText = this.game.add.text(this.game.world.centerX, this.game.world.height - 30, 'You died :(', this.redStyle);\r\n    this.deadText.anchor.set(0.5);\r\n    this.deadText.visible = false\r\n  }\r\n\r\n  refreshStatistic() {\r\n    this.speedText.text = this.speedLabel();\r\n    this.powerText.text = this.powerLabel();\r\n    this.delayText.text = this.delayLabel();\r\n  }\r\n\r\n  showDeadInfo() {\r\n    this.deadText.visible = true\r\n  }\r\n\r\n  speedLabel() {\r\n    return this.player.speed\r\n  }\r\n\r\n  powerLabel() {\r\n    return `x ${this.player.power}`\r\n  }\r\n\r\n  delayLabel() {\r\n    return `${this.player.delay / 1000} sec.`\r\n  }\r\n}\r\n","import { TILE_SIZE, PING } from '../utils/constants';\r\nimport { Text } from '../helpers/elements';\r\n\r\nexport default class EnemyPlayer extends Phaser.Sprite {\r\n\r\n  constructor({ game, id, spawn, skin }) {\r\n    super(game, spawn.x, spawn.y, 'bomberman_' + skin);\r\n\r\n    this.game = game\r\n    this.id = id;\r\n\r\n    this.currentPosition = spawn;\r\n    this.lastMoveAt = 0;\r\n\r\n    this.game.physics.arcade.enable(this);\r\n    this.body.setSize(20, 20, 6, 6);\r\n    this.body.immovable = true;\r\n\r\n    this.animations.add('up', [9, 10, 11], 15, true);\r\n    this.animations.add('down', [0, 1, 2], 15, true);\r\n    this.animations.add('right', [6, 7, 8], 15, true);\r\n    this.animations.add('left', [3, 4, 5], 15, true);\r\n\r\n    this.defineSelf(skin)\r\n  }\r\n\r\n  update () {\r\n    // this.game.debug.body(this);\r\n  }\r\n\r\n  goTo(newPosition) {\r\n    this.lastMoveAt = this.game.time.now;\r\n\r\n    this.animateFace(newPosition);\r\n\r\n    this.game.add.tween(this).to(newPosition, PING, Phaser.Easing.Linear.None, true);\r\n  }\r\n\r\n  animateFace(newPosition) {\r\n    let face = 'down';\r\n    let diffX = newPosition.x - this.currentPosition.x;\r\n    let diffY = newPosition.y - this.currentPosition.y;\r\n\r\n    if (diffX < 0) {\r\n      face = 'left'\r\n    } else if (diffX > 0) {\r\n      face = 'right'\r\n    } else if (diffY < 0) {\r\n      face = 'up'\r\n    } else if (diffY > 0) {\r\n      face = 'down'\r\n    }\r\n\r\n    this.animations.play(face)\r\n    this.currentPosition = newPosition;\r\n  }\r\n\r\n  defineSelf(name) {\r\n    let playerText = new Text({\r\n      game: this.game,\r\n      x: TILE_SIZE / 2,\r\n      y: -10,\r\n      text: name,\r\n      style: {\r\n        font: '14px Areal',\r\n        fill: '#FF0000',\r\n          stroke: '#000000',\r\n          strokeThickness: 3\r\n      }\r\n    })\r\n\r\n    this.addChild(playerText);\r\n  }\r\n}\r\n","import { TILE_SIZE, EXPLOSION_TIME } from '../utils/constants';\r\n\r\nexport default class Bomb extends Phaser.Sprite {\r\n\r\n  constructor(game, id, col, row) {\r\n    let centerCol = (col * TILE_SIZE) + TILE_SIZE / 2\r\n    let centerRow = (row * TILE_SIZE) + TILE_SIZE / 2\r\n\r\n    super(game, centerCol, centerRow, 'bomb_tileset');\r\n    this.scale.setTo(0.7);\r\n    this.anchor.setTo(0.5);\r\n\r\n    this.game = game\r\n    this.id = id;\r\n\r\n    this.game.physics.arcade.enable(this);\r\n\r\n    this.game.add.tween(this.scale).to({ x: 1.2, y: 1.2 }, EXPLOSION_TIME, Phaser.Easing.Linear.None, true);\r\n\r\n    this.body.immovable = true;\r\n    // TODO: https://phaser.io/docs/2.4.4/Phaser.AnimationManager.html#add\r\n    this.animations.add('bomb', [0,1,2,3,4,5,6,7,8,9,10,11,12,13], 6, true);\r\n    this.animations.play('bomb');\r\n  }\r\n\r\n  update() {\r\n    // this.game.debug.body(this);\r\n  }\r\n\r\n}\r\n","import { SPEED, POWER, DELAY, TILE_SIZE } from '../utils/constants';\r\n\r\nexport default class Spoil extends Phaser.Sprite {\r\n\r\n  constructor(game, spoil) {\r\n\r\n    let spoil_type;\r\n    if (spoil.spoil_type === DELAY) {\r\n      spoil_type = 0\r\n    }\r\n    if (spoil.spoil_type === POWER) {\r\n      spoil_type =  1\r\n    }\r\n    if (spoil.spoil_type === SPEED) {\r\n      spoil_type = 2\r\n    }\r\n\r\n    super(game, (spoil.col * TILE_SIZE), (spoil.row * TILE_SIZE), 'spoil_tileset', spoil_type);\r\n\r\n    this.id = spoil.id\r\n\r\n    this.game.physics.arcade.enable(this);\r\n  }\r\n\r\n}\r\n","import { TILE_SIZE } from '../utils/constants';\r\n\r\nexport default class FireBlast extends Phaser.Sprite {\r\n\r\n  constructor(game, cell) {\r\n    super(game, (cell.col * TILE_SIZE), (cell.row * TILE_SIZE), cell.type, 0);\r\n\r\n    this.game = game\r\n\r\n    this.animations.add('blast', [0, 1, 2, 3, 4]);\r\n\r\n    // 15 - framerate, loop, kill_on_complete\r\n    this.play('blast', 15, false, true);\r\n\r\n    this.game.physics.arcade.enable(this);\r\n  }\r\n\r\n}\r\n","import { TILE_SIZE } from '../utils/constants';\r\n\r\nexport default class Bone extends Phaser.Sprite {\r\n\r\n  constructor(game, col, row) {\r\n    super(game, (col * TILE_SIZE), (row * TILE_SIZE), 'bone_tileset');\r\n  }\r\n\r\n}\r\n","import { Text } from '../helpers/elements';\r\n\r\nclass Win extends Phaser.State {\r\n\r\n  init(winner_skin) {\r\n    this.skin = winner_skin\r\n  }\r\n\r\n  create() {\r\n    new Text({\r\n      game: this.game,\r\n      x: this.game.world.centerX,\r\n      y: this.game.world.centerY,\r\n      text: this.winnerText(),\r\n      style: {\r\n        font: '30px Areal',\r\n        fill: '#FFFFFF'\r\n      }\r\n    })\r\n  }\r\n\r\n  update() {\r\n    if( this.game.input.keyboard.isDown(Phaser.Keyboard.ENTER) ) {\r\n      this.returnToMenu();\r\n    }\r\n  }\r\n\r\n  returnToMenu() {\r\n    this.state.start('Menu');\r\n  }\r\n\r\n  winnerText() {\r\n    if (this.skin) {\r\n      return `Player: \"${this.skin}\" won! Press Enter to return to main menu.`\r\n    }\r\n\r\n    return 'Opponent left! Press Enter to return to main menu.'\r\n  }\r\n}\r\n\r\nexport default Win;\r\n"],"sourceRoot":""}